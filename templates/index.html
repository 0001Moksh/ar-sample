<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lamp 3D/AR Viewer</title> <!-- Updated title -->

    <!-- Model Viewer Script -->
    <script type="module"
        src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>

    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            margin: 0; /* Added to prevent default body margin */
        }

        h1, p {
             margin-bottom: 1rem; /* Add some spacing */
        }

        model-viewer {
            width: 90%;
            max-width: 800px;
            height: 600px;
            margin: 20px auto;
            border-radius: 8px;
            background-color: #e9ecef;
            display: block; /* Ensure block layout */
            position: relative; /* Needed for default AR button positioning */
        }

        /* Optional: Style the default AR button if needed */
        model-viewer::part(ar-button) {
            background-image: url(https://modelviewer.dev/shared-assets/icons/ic_view_in_ar_new_googblue_48dp.png);
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
            background-color: white;
            position: absolute;
            right: 16px;
            bottom: 16px;
            border-radius: 50%;
            border: none;
            width: 48px;
            height: 48px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            /* display: block; */ /* Usually not needed, model-viewer handles visibility */
        }


        /* Optional: Progress bar styling */
        .progress-bar {
            display: block; /* Make it visible */
            width: 100%;
            height: 4px;
            background-color: #e9ecef;
            overflow: hidden; /* Ensure update-bar stays within bounds */
            position: absolute;
            top: 0;
            left: 0;
        }
        .update-bar {
            background-color: #007bff;
            width: 0%;
            height: 100%;
            transition: width 0.3s ease;
        }
        model-viewer.loaded .progress-bar {
          visibility: hidden; /* Hide when loaded */
        }


        @media (max-width: 767px) {
            model-viewer {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <p>Interactive 3D Model with AR Support</p> <!-- Updated description -->

    <model-viewer
        alt="Lamp With Shade"
        src="{{ url_for('static', filename='model/Lamp With Shade.glb') }}"

        {# --- AR Attributes Added Below --- #}
        ios-src="{{ url_for('static', filename='model/Lamp With Shade.usdz') }}" {# **REQUIRED** for AR on iOS #}
        ar                                                                      {# Enable AR features #}
        ar-modes="webxr scene-viewer quick-look"                                {# Specify AR modes to support #}
        ar-scale="auto"                                                         {# Optional: Let user scale or fix scale #}
        {# --- End of Added AR Attributes --- #}

        camera-controls
        auto-rotate
        shadow-intensity="1"
        touch-action="pan-y">

        {# Optional: Progress bar slot #}
        <div class="progress-bar" slot="progress-bar">
            <div class="update-bar"></div>
        </div>

        {# Optional: Custom AR button if you don't like the default #}
        {# <button slot="ar-button" style="background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; ">
               ðŸš€ View in AR
           </button> #}

    </model-viewer>


</body>
</html>